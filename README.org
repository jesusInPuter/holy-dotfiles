#+TITLE: âœž Holy Dotfiles
#+DESCRIPTION: A minimal, keybinding-heavy setup for Arch Linux, centered around i3, Fish, and modal editors.
#+AUTHOR: jesus
#+OPTIONS: toc:2

A minimal, keybinding-heavy setup for Arch Linux, centered around i3, Fish, and modal editors.

-----

* Overview

1. *Dependencies:* Installing all required packages, fonts, and tools.  
2. *Installation:* Cloning this repository and linking the configuration files.  
3. *Finalization:* Syncing configurations and setting the default shell.  

-----

* Stage 1: Dependencies
These packages must be installed before the configurations can be applied.

** 1.1 Install Core Packages from Official Repositories
This command installs the window manager, terminal, editors, shell, fonts, and various essential command-line tools:

#+BEGIN_SRC bash
sudo pacman -S --needed i3-wm kitty fish starship neovim git lazygit picom rofi thefuck tmux atuin lsd bat ripgrep fd ttf-jetbrains-mono-nerd emacs pulseaudio
#+END_SRC

** 1.2 Install an AUR Helper (yay)
An AUR (Arch User Repository) helper is needed for packages not in the official repos:

#+BEGIN_SRC bash
sudo pacman -S --needed git base-devel
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si
cd .. && rm -rf yay
#+END_SRC

** 1.3 Install AUR Packages
Use ~yay~ to install the remaining applications:

#+BEGIN_SRC bash
yay -S --needed superfile brave-bin
#+END_SRC

-----

* Stage 2: Installation
With the dependencies installed, you can now deploy the dotfiles.

** 2.1 Clone the Dotfiles Repository
Clone this repository into your home directory:

#+BEGIN_SRC bash
git clone https://github.com/jesusInPuter/holy-dotfiles.git ~/holy-dotfiles
#+END_SRC

** 2.2 Install the Doom Emacs Framework
The base Doom Emacs framework must be installed before it can be configured:

#+BEGIN_SRC bash
git clone --depth 1 https://github.com/doomemacs/doomemacs ~/.emacs.d
~/.emacs.d/bin/doom install
#+END_SRC

** 2.3 Link the Configuration
This setup uses a symbolic link, which makes your system read its configuration directly from the =holy-dotfiles= repository:

#+BEGIN_SRC bash
# First, back up the default .config directory to be safe
mv ~/.config ~/.config.bak

# Create the symlink
ln -s ~/holy-dotfiles ~/.config
#+END_SRC

-----

* Stage 3: Finalization
These final commands sync the configurations and set the shell.

** 3.1 Sync Doom Emacs
Run =doom sync= to make Doom Emacs load your personal configuration from this repository:

#+BEGIN_SRC bash
~/.emacs.d/bin/doom sync
#+END_SRC

** 3.2 Set Fish as the Default Shell
Change your user's default login shell to Fish:

#+BEGIN_SRC bash
chsh -s /usr/bin/fish
#+END_SRC

-----


* Fixing Sound with PipeWire

** 1. Install PipeWire and related packages
#+BEGIN_SRC bash
sudo pacman -S pipewire pipewire-pulse pipewire-alsa pipewire-jack wireplumber
#+END_SRC

** 2. Remove PulseAudio to avoid conflicts
- Confirm removal of `pulseaudio` when prompted during installation.

** 3. Disable any lingering PulseAudio services
#+BEGIN_SRC bash
systemctl --user mask pulseaudio.socket pulseaudio.service
systemctl --user stop pulseaudio.socket pulseaudio.service
killall pulseaudio
#+END_SRC

** 4. Enable and start PipeWire + session manager
#+BEGIN_SRC bash
systemctl --user enable pipewire pipewire-pulse wireplumber
systemctl --user start pipewire pipewire-pulse wireplumber
#+END_SRC

** 5. Verify the PipeWire sink exists
#+BEGIN_SRC bash
pactl list short sinks
#+END_SRC

** 6. Unmute the sink and set volume
#+BEGIN_SRC bash
pactl set-sink-mute <sink_index> 0
pactl set-sink-volume <sink_index> 100%
#+END_SRC

** 7. Play test audio to wake the SUSPENDED sink
#+BEGIN_SRC bash
paplay /usr/share/sounds/alsa/Front_Center.wav
# Or, if using ALSA directly:
# aplay /usr/share/sounds/alsa/Front_Center.wav
#+END_SRC

** 8. Optional: verify services are running
#+BEGIN_SRC bash
systemctl --user status pipewire pipewire-pulse wireplumber
#+END_SRC

** 9. Optional: ALSA direct test through PipeWire
#+BEGIN_SRC bash
speaker-test -D default -c 2 -t sine
#+END_SRC
